<div class="chart-dashboard">
    <h2>📡 API Data Loader</h2>

    <div class="form-row">
        <input type="text" [(ngModel)]="apiUrl"
            placeholder="Enter API URL (e.g., https://jsonplaceholder.typicode.com/todos/1)" />
        <button (click)="fetchData()" [disabled]="isLoading">
            <span *ngIf="!isLoading">🔄 Fetch Data</span>
            <span *ngIf="isLoading">⏳ Loading...</span>
        </button>
    </div>

    <div class="layout">
        <!-- Sidebar Controls -->
        <aside class="sidebar">
            <label>Chart Type</label>
            <select [(ngModel)]="chartType" (change)="renderChart()">
                <option value="column">Column</option>
                <option value="bar">Bar</option>
                <option value="line">Line</option>
                <option value="pie">Pie</option>
                <option value="donut">Donut</option>
                <option value="map">Map</option>
            </select>

            <label> Value</label>
            <select [(ngModel)]="selectedValueField" (change)="renderChart()">
                <option *ngFor="let f of valueFields" [value]="f">{{ f }}</option>
            </select>

            <label> Argument </label>
            <select [(ngModel)]="selectedArgumentField" (change)="renderChart()">
                <option *ngFor="let f of argumentFields" [value]="f">{{ f }}</option>
            </select>

            <label> Series (Group By)</label>
            <select [(ngModel)]="selectedSeriesField" (change)="renderChart()">
                <option value="">None</option>
                <option *ngFor="let f of seriesFields" [value]="f">{{ f }}</option>
            </select>

            <!-- <label>🙈 Hidden Dimension</label>
      <select [(ngModel)]="hiddenDimension" (change)="renderChart()">
        <option *ngFor="let f of allFields" [value]="f">{{ f }}</option>
      </select>

      <label>🙉 Hidden Measure</label>
      <select [(ngModel)]="hiddenMeasure" (change)="renderChart()">
        <option *ngFor="let f of valueFields" [value]="f">{{ f }}</option>
      </select> -->
        </aside>

        <!-- Chart Container -->
        <main class="chart-area">
            <div id="chart-container"></div>
        </main>
    </div>
</div>