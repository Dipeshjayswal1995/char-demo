<div class="main-container">
  <div class="header">
    <h1>US State Data Dashboard</h1>
  </div>

  <div class="controls-container">
    <div class="control-group">
      <label for="displayCategory">Display Category:</label>
      <select id="displayCategory" (change)="onDisplayCategoryChange($event)" [(ngModel)]="currentDisplayCategory">
        <option value="income">Median Household Income</option>
        <option value="population">Population</option>
        <option value="area">Area (sq mi)</option>
        <option value="gdp">GDP per Capita</option>
        <option value="unemployment">Unemployment Rate</option>
        <option value="housing">Housing Cost Index</option>
        <option value="education">Education Spending per Capita</option>
      </select>
    </div>

    <div class="control-group">
      <label for="chartType">Chart Type:</label>
      <select id="chartType" (change)="onChartTypeChange($event)" [(ngModel)]="currentChartType">
        <option value="map">US Map</option>
        <option value="bar">Bar Chart</option>
        <option value="pie">Pie Chart</option>
        <option value="donut">Donut Chart</option>
      </select>
    </div>

    <div class="control-group">
      <label for="filterMonth">Filter by Month:</label>
      <select id="filterMonth" (change)="filterByMonth($event)" [(ngModel)]="currentMonth">
        <option value="">-- Select Month --</option>
        <option *ngFor="let month of getMonthsForDropdown()" [value]="month.value">{{ month.viewValue }}</option>
      </select>
    </div>

    <div class="control-group">
      <label for="filterSixMonths">Filter by 6-Month Average:</label>
      <select id="filterSixMonths" (change)="filterBySixMonths($event)" [(ngModel)]="currentSixMonthStartMonth">
        <option value="">-- Select Start Month --</option>
        <option *ngFor="let month of getMonthsForDropdown()" [value]="month.value">{{ month.viewValue }}</option>
      </select>
    </div>

    <div class="control-group">
      <label for="filterSingleState">Filter by Single State:</label>
      <select id="filterSingleState" (change)="searchAndHighlightState()" [(ngModel)]="searchStateText">
        <option value="">-- Select State --</option>
        <option *ngFor="let state of getAllStateCodes()" [value]="state.value">{{ state.viewValue }}</option>
      </select>
    </div>

    <div class="control-group">
      <label for="filterTopN">Top N States:</label>
      <select id="filterTopN" (change)="filterByTopN($event)" [(ngModel)]="currentTopN">
        <option value="">-- Select Top N --</option>
        <option value="5">Top 5</option>
        <option value="10">Top 10</option>
        <option value="20">Top 20</option>
      </select>
    </div>

    <div class="control-group">
      <label for="filterBottomN">Bottom N States:</label>
      <select id="filterBottomN" (change)="filterByBottomN($event)" [(ngModel)]="currentBottomN">
        <option value="">-- Select Bottom N --</option>
        <option value="5">Bottom 5</option>
        <option value="10">Bottom 10</option>
        <option value="20">Bottom 20</option>
      </select>
    </div>

    <div class="control-group range-filter">
      <label>Filter by Range:</label>
      <input type="number" id="minValInput" placeholder="Min Value" [(ngModel)]="currentMinVal">
      <input type="number" id="maxValInput" placeholder="Max Value" [(ngModel)]="currentMaxVal">
      <button (click)="filterByRange()">Apply Range</button>
    </div>

    <div class="control-group">
      <button (click)="resetFilters()">Reset Filters</button>
    </div>
  </div>

  <hr>

  <div id="dynamicChartContainer" class="chart-container"></div>

</div>